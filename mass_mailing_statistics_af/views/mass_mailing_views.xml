<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record model="ir.ui.view" id="inherit_mail_mass_mailing_form_af_statistics">
        <field name="name">inherit.mail.mass.mailing.form.af.statistics</field>
        <field name="model">mail.mass_mailing</field>
        <field name="inherit_id" ref="mass_mailing.view_mail_mass_mailing_form"/>
        <field name="arch" type="xml">
            <xpath expr="//div[@class='oe_button_box']" position="replace">
                <div class="oe_button_box" name="button_box">
                    <button name="action_view_unsubscription"
                            type="object"
                            attrs="{'invisible': [('state', 'in', ('draft','test'))]}"
                            class="oe_stat_button"
                            style="width:165px !important;">
                        <div class="o_field_widget o_stat_info o_readonly_modifier">
                            <span class="o_stat_value">
                                <field name="total_unsubscribers" nolabel="1"/>
                            </span>
                            <span class="o_stat_text">
                                Avregistreringar
                            </span>
                        </div>
                        <field name="unsubscription_ratio_percent" widget="percentpie"/>
                    </button>
                    <button name="action_view_clicked"
                            type="object"
                            attrs="{'invisible': [('state', 'in', ('draft','test'))]}"
                            class="oe_stat_button"
                            style="width:90px !important;">
                        <div class="o_field_widget o_stat_info o_readonly_modifier">
                            <span class="o_stat_value">
                                <field name="clicks" nolabel="1"/>
                            </span>
                            <span class="o_stat_text">
                                CTOR
                            </span>
                        </div>
                        <field name="ctor" widget="percentpie"/>
                    </button>
                    <button name="action_view_clicked"
                            type="object"
                            attrs="{'invisible': [('state', 'in', ('draft','test'))]}"
                            class="oe_stat_button"
                            style="width:80px !important;">
                        <div class="o_field_widget o_stat_info o_readonly_modifier">
                            <span class="o_stat_value">
                                <field name="clicks" nolabel="1"/>
                            </span>
                            <span class="o_stat_text">
                                CTR
                            </span>
                        </div>
                        <field name="clicks_ratio" string="Clicks" widget="percentpie"/>
                    </button>
                    <button name="action_view_opened"
                            type="object"
                            context="{'search_default_filter_opened': True}"
                            attrs="{'invisible': [('state', 'in', ('draft','test'))]}"
                            class="oe_stat_button">
                        <div class="o_field_widget o_stat_info o_readonly_modifier">
                            <span class="o_stat_value">
                                <field name="opened" nolabel="1"/>
                            </span>
                            <span class="o_stat_text">
                                Ã–ppning
                            </span>
                        </div>
                        <field name="opened_ratio" string="Opened" widget="percentpie"/>
                    </button>
                    <button name="action_view_delivered"
                            type="object"
                            context="{'search_default_filter_received': True}"
                            attrs="{'invisible': [('state', 'in', ('draft','test'))]}"
                            class="oe_stat_button"
                            style="width:180px !important;">
                        <field name="received" widget="statinfo"/>
                        <field name="received_ratio" string="Received" widget="percentpie"/>
                    </button>
                    <button name="action_view_bounced"
                            type="object"
                            context="{'search_default_filter_bounced': True}"
                            attrs="{'invisible': [('state', 'in', ('draft','test'))]}"
                            class="oe_stat_button">
                        <field name="bounced" widget="statinfo"/>
                        <field name="bounced_ratio" string="Bounced" widget="percentpie"/>
                    </button>
                    <button name="action_view_sent"
                            type="object"
                            context="{'search_default_filter_sent': True}"
                            class="oe_stat_button o_mass_mailing_button"
                            attrs="{'invisible': ['&amp;', ('sent', '=', 0), ('state', 'in', ('draft','test'))]}">
                        <field name="sent" string="Emails Sent" widget="statinfo"/>
                    </button>
                </div>
            </xpath>
        </field>
    </record>

    <record model="ir.ui.view" id="inherit_mail_mass_mailing_kanban_af_statistics">
        <field name="name">inherit.mail.mass.mailing.kanban.af.statistics</field>
        <field name="model">mail.mass_mailing</field>
        <field name="inherit_id" ref="mass_mailing.view_mail_mass_mailing_kanban"/>
        <field name="arch" type="xml">
            <xpath expr="//div[hasclass('o_kanban_record_body')]/t/div[1]" position="replace">
                <div class="row">
                    <div class="col-6">
                        <a name="%(mass_mailing.action_view_mass_mailing_links_statistics)d"
                           type="action">Sent
                        </a>
                    </div>
                    <div class="col-6 text-right">
                        <field name="sent"/>
                    </div>
                </div>
            </xpath>
            <xpath expr="//div[hasclass('o_kanban_record_body')]/t/div[2]" position="replace">
                <div class="row">
                    <div class="col-6">
                        <a name="%(mass_mailing.action_view_mass_mailing_links_statistics)d"
                           type="action">Delivered
                        </a>
                    </div>
                    <div class="col-6 text-right">
                        <field name="received_ratio" widget="percentpie"/>
                    </div>
                </div>
            </xpath>
            <xpath expr="//div[hasclass('o_kanban_record_body')]/t/div[3]" position="replace">
                <div class="row">
                    <div class="col-6">
                        <a name="%(mass_mailing.action_view_mail_mail_statistics_mailing)d"
                           context="{'search_default_filter_opened': True}"
                           type="action">OR
                        </a>
                    </div>
                    <div class="col-6 text-right">
                        <field name="opened_ratio" widget="percentpie"/>
                    </div>
                </div>

            </xpath>
            <xpath expr="//div[hasclass('o_kanban_record_body')]/t/div[4]" position="replace">
                <div class="row">
                    <div class="col-6">
                        <a name="%(mass_mailing.action_view_mass_mailing_links_statistics)d"
                           type="action">Total clicks
                        </a>
                    </div>
                    <div class="col-6 text-right">
                        <field name="total_clicks"/>
                    </div>
                </div>
            </xpath>
        </field>
    </record>

    <record model="ir.ui.view" id="view_mail_mass_mailing_tree_af">
        <field name="name">mail.mass_mailing.tree.af</field>
        <field name="model">mail.mass_mailing</field>
        <field name="inherit_id" ref="mass_mailing.view_mail_mass_mailing_tree"/>
        <field name="arch" type="xml">
            <field name="replied" position="replace">
                <field name="sent_date"/>
                <field name="bounced"/>
                <field name="clicks"/>
                <field name="clicks_ratio_percentage"/>
                <field name="opened_ratio_percentage"/>
                <field name="ctor_percentage"/>
                <field name="total_clicks"/>
            </field>
            <field name="delivered" position="replace">
                <field name="received"/>
            </field>
        </field>
    </record>

</odoo>

